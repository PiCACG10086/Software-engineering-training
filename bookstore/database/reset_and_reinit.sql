-- 重置数据库脚本
-- 删除所有表数据并重新插入初始数据

USE bookstore;

-- 禁用外键检查（如果有的话）
SET FOREIGN_KEY_CHECKS = 0;

-- 清空所有表数据
TRUNCATE TABLE t_cart;
TRUNCATE TABLE t_order_item;
TRUNCATE TABLE t_order;
TRUNCATE TABLE t_book;
TRUNCATE TABLE t_user;

-- 重新启用外键检查
SET FOREIGN_KEY_CHECKS = 1;

-- 重新插入用户数据
INSERT INTO t_user (username, password, role, name, student_id) VALUES
('admin', 'admin123', 'ADMIN', '系统管理员', NULL),
('teacher1', 'teacher123', 'TEACHER', '张教授', NULL),
('teacher2', 'teacher123', 'TEACHER', '李教授', NULL),
('student1', 'student123', 'STUDENT', '王小明', '2021001'),
('student2', 'student123', 'STUDENT', '李小红', '2021002'),
('student3', 'student123', 'STUDENT', '张小华', '2021003'),
('student4', 'student123', 'STUDENT', '刘小强', '2021004'),
('student5', 'student123', 'STUDENT', '陈小美', '2021005');

-- 重新插入图书数据
INSERT INTO t_book (title, author, publisher, isbn, price, stock, description) VALUES
('数据结构(C语言版)', '严蔚敏', '清华大学出版社', '9787302147510', 45.00, 100, '经典的数据结构教材，适合计算机专业学生'),
('算法导论(原书第3版)', '托马斯·科尔曼', '机械工业出版社', '9787111407010', 128.00, 80, '算法领域的权威教材'),
('Java核心技术 卷I', '凯·霍斯特曼', '机械工业出版社', '9787111213826', 119.00, 60, 'Java编程经典教材'),
('计算机网络(第7版)', '谢希仁', '电子工业出版社', '9787121302954', 59.00, 90, '计算机网络基础教材'),
('操作系统概念(原书第9版)', '亚伯拉罕·西尔伯沙茨', '高等教育出版社', '9787040396630', 89.00, 70, '操作系统理论与实践'),
('数据库系统概论(第5版)', '王珊', '高等教育出版社', '9787040406641', 65.00, 85, '数据库系统经典教材'),
('高等数学(上册)', '同济大学数学系', '高等教育出版社', '9787040396621', 56.80, 120, '高等数学经典教材上册'),
('高等数学(下册)', '同济大学数学系', '高等教育出版社', '9787040396631', 52.30, 110, '高等数学经典教材下册'),
('线性代数(第六版)', '同济大学数学系', '高等教育出版社', '9787040396645', 39.20, 100, '线性代数标准教材'),
('概率论与数理统计', '盛骤', '高等教育出版社', '9787040238969', 42.50, 95, '概率统计基础教材'),
('数学分析(上册)', '华东师范大学数学系', '高等教育出版社', '9787040183184', 48.60, 75, '数学分析理论教材'),
('大学物理(上册)', '张三慧', '清华大学出版社', '9787302112174', 45.00, 90, '大学物理基础教材上册'),
('大学物理(下册)', '张三慧', '清华大学出版社', '9787302112181', 43.00, 85, '大学物理基础教材下册'),
('普通物理学(第七版)', '程守洙', '高等教育出版社', '9787040396652', 89.00, 70, '普通物理学经典教材'),
('新视野大学英语1', '郑树棠', '外语教学与研究出版社', '9787513533348', 39.90, 150, '大学英语基础教材第一册'),
('新视野大学英语2', '郑树棠', '外语教学与研究出版社', '9787513533355', 42.90, 140, '大学英语基础教材第二册'),
('大学英语综合教程1', '李荫华', '上海外语教育出版社', '9787544627023', 45.00, 130, '大学英语综合训练教材'),
('西方经济学(微观部分)', '高鸿业', '中国人民大学出版社', '9787300248967', 48.00, 80, '微观经济学经典教材'),
('西方经济学(宏观部分)', '高鸿业', '中国人民大学出版社', '9787300248974', 46.00, 75, '宏观经济学经典教材'),
('管理学原理与方法', '周三多', '复旦大学出版社', '9787309132052', 52.00, 70, '管理学基础理论教材'),
('会计学原理', '葛家澍', '中国人民大学出版社', '9787300234567', 55.00, 65, '会计学入门教材'),
('中国近现代史纲要', '本书编写组', '高等教育出版社', '9787040396659', 28.00, 200, '思政课必修教材'),
('马克思主义基本原理概论', '本书编写组', '高等教育出版社', '9787040396666', 25.00, 180, '马克思主义理论教材'),
('大学语文', '徐中玉', '华东师范大学出版社', '9787561789456', 35.00, 120, '大学语文经典教材'),
('中国文学史', '袁行霈', '高等教育出版社', '9787040183191', 68.00, 60, '中国文学发展史教材'),
('人工智能导论', '李德毅', '中国科学技术大学出版社', '9787312045678', 58.00, 50, '人工智能基础理论'),
('机器学习', '周志华', '清华大学出版社', '9787302423287', 88.00, 45, '机器学习经典教材'),
('软件工程导论', '张海藩', '清华大学出版社', '9787302234567', 65.00, 55, '软件工程基础教材'),
('计算机图形学', '孙家广', '清华大学出版社', '9787302345678', 72.00, 40, '计算机图形学理论与实践'),
('编译原理', '陈火旺', '国防工业出版社', '9787118456789', 69.00, 35, '编译器设计原理'),
('数字信号处理', '奥本海姆', '电子工业出版社', '9787121567890', 95.00, 30, '数字信号处理经典教材');

-- 显示重新插入的数据统计
SELECT '用户数据' AS '表名', COUNT(*) AS '记录数' FROM t_user
UNION ALL
SELECT '图书数据' AS '表名', COUNT(*) AS '记录数' FROM t_book
UNION ALL
SELECT '订单数据' AS '表名', COUNT(*) AS '记录数' FROM t_order
UNION ALL
SELECT '购物车数据' AS '表名', COUNT(*) AS '记录数' FROM t_cart;

-- 数据库重置完成
SELECT '数据库重置完成！所有表数据已清空并重新插入初始数据。' AS '状态';